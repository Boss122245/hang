<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Web App</title>
</head>
<body>

<input id="task" placeholder="พิมพ์ข้อมูล">
<button onclick="addTask()">เพิ่ม</button>
<ul id="list"></ul>

<script>
const API_URL = 'https://script.google.com/macros/s/AKfycbyToXXkpxJjjZilEgDRluRIoqYu5z2JOFM1Sq_C6IPL-oYDEDdgXUbl8mdCPoUxzK0fBw/exec'; // ต้องมีแค่อันเดียว

function loadTasks() {
  fetch(API_URL)
    .then(r => r.json())
    .then(data => {
      const list = document.getElementById('list');
      list.innerHTML = '';
      data.forEach(t => {
        const li = document.createElement('li');
        li.textContent = t;
        list.appendChild(li);
      });
    });
}

function addTask() {
  const input = document.getElementById('task');
  if (!input.value.trim()) return;

  fetch(API_URL, {
    method: 'POST',
    headers: { 'Content-Type': 'text/plain;charset=utf-8' },
    body: input.value
  })
  .then(() => {
    input.value = '';
    loadTasks();
  })
  .catch(() => alert('เพิ่มข้อมูลไม่สำเร็จ'));
}

loadTasks();
</script>

</body>
</html>
